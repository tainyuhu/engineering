"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[670],{6398:function(e,a,t){t.r(a),t.d(a,{default:function(){return oe}});var l=t(6252),r=t(3577),o=t(9095),n=t(9773),s=t(5215),d=t(5911),i=t(1669),c=t(7737),u=t(2793),g=t(401),p=t(3345),h=t(2199),m=t(7070);const D=e=>((0,l.dD)("data-v-15e77a7c"),e=e(),(0,l.Cn)(),e),b={class:"mb-3",style:{"padding-left":"20px",display:"flex","align-items":"center"}},w=D((()=>(0,l._)("span",{class:"font-weight-bold ml-2"},"瀏覽22.8KV工程進度：",-1))),y={class:"function-row"},_={class:"status-and-page-size-selector"},k=D((()=>(0,l._)("span",null,"狀態：",-1))),f={key:0,class:"py-2 d-flex justify-center"},x={key:1},q={key:0,class:"div-container"},v={key:1,class:"div-container"},M={key:2,class:"div-container"},T={key:3,class:"div-container report-container",style:{"background-color":"white",display:"flex",height:"100%"}},S={key:4,class:"div-container report-container",style:{"background-color":"white",display:"flex",height:"100%"}},C={key:5,class:"div-container report-container",style:{"background-color":"white",display:"flex",height:"100%"}},W={class:"mb-3",ref:"engineeringSection",style:{"padding-left":"20px",display:"flex","align-items":"center"}},P=D((()=>(0,l._)("span",{class:"font-weight-bold ml-2"},"瀏覽土木/纜線工程進度：",-1))),V={class:"function-row"},N={class:"status-and-page-size-selector"},U=D((()=>(0,l._)("span",null,"狀態：",-1))),R={key:0,class:"py-2 d-flex justify-center"},$={key:1},E={key:0,class:"div-container"},A={key:1,class:"div-container"},j={key:2,class:"div-container"},L={key:3,class:"div-container report-container",style:{"background-color":"white",display:"flex",height:"100%"}},Q={key:4,class:"div-container report-container",style:{"background-color":"white",display:"flex",height:"100%"}},z={key:5,class:"div-container report-container",style:{"background-color":"white",display:"flex",height:"100%"}},F={class:"function-row"},O={class:"status-and-page-size-selector"},Y=D((()=>(0,l._)("span",null,"狀態：",-1))),Z={key:0,class:"py-2 d-flex justify-center"},H={key:1},K={key:0,class:"div-container"},I={key:1,class:"div-container"},B={key:2,class:"div-container"};function G(e,a,t,D,G,J){const X=(0,l.up)("WeekLoopTable"),ee=(0,l.up)("AllQuarterLoopTable"),ae=(0,l.up)("QuarterLoopTable"),te=(0,l.up)("SiteSelectionChart");return(0,l.wg)(),(0,l.j4)(i.K,null,{default:(0,l.w5)((()=>[(0,l._)("div",b,[(0,l.Wm)(c.t,{color:"blue"},{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-chevron-right-box")])),_:1}),w]),(0,l._)("div",y,[(0,l._)("div",_,[k,(0,l.Wm)(o.T,{class:(0,r.C_)("table"===G.displayMode?"report-btn":"table-btn"),onClick:J.toggleDisplayMode},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(J.displayModeText),1)])),_:1},8,["class","onClick"])]),G.showDetails&&"table"===G.displayMode?((0,l.wg)(),(0,l.iD)("div",f,[(0,l.Wm)(n.fF,{mandatory:"",modelValue:G.timeMode,"onUpdate:modelValue":a[0]||(a[0]=e=>G.timeMode=e),class:"time-toggle",variant:"outlined"},{default:(0,l.w5)((()=>[(0,l.Wm)(o.T,{value:"quarter"},{default:(0,l.w5)((()=>[(0,l.Uk)("季")])),_:1}),(0,l.Wm)(o.T,{value:"week"},{default:(0,l.w5)((()=>[(0,l.Uk)("週")])),_:1})])),_:1},8,["modelValue"])])):(0,l.kq)("",!0),"table"===G.displayMode?((0,l.wg)(),(0,l.iD)("div",x,[(0,l.Wm)(o.T,{class:(0,r.C_)("engineering"===G.projectType?"bank-btn":"engineering-btn"),onClick:J.toggleProjectType},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(J.projectTypeText),1)])),_:1},8,["class","onClick"]),"engineering"===G.projectType?((0,l.wg)(),(0,l.j4)(o.T,{key:0,class:"custom-btn",onClick:a[1]||(a[1]=e=>J.scrollToSection("engineeringSection"))},{default:(0,l.w5)((()=>[(0,l.Uk)(" 土木/纜線進度 ")])),_:1})):(0,l.kq)("",!0),(0,l.Wm)(o.T,{class:"overview-btn",rounded:"0",onClick:a[2]||(a[2]=e=>G.showDetails=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("即時")])),_:1}),(0,l.Wm)(o.T,{class:"details-btn",rounded:"0",onClick:a[3]||(a[3]=e=>G.showDetails=!0)},{default:(0,l.w5)((()=>[(0,l.Uk)("詳情")])),_:1})])):(0,l.kq)("",!0)]),"week"===G.timeMode&&G.showDetails&&"table"===G.displayMode?((0,l.wg)(),(0,l.iD)("div",q,[(0,l.Wm)(X,{allDateRanges:J.paginatedDateRanges,weekTableData:J.paginatedData},null,8,["allDateRanges","weekTableData"]),(0,l.Wm)(u.k,{modelValue:G.currentPage,"onUpdate:modelValue":a[4]||(a[4]=e=>G.currentPage=e),length:J.totalPages},null,8,["modelValue","length"])])):(0,l.kq)("",!0),"quarter"===G.timeMode&&G.showDetails&&"table"===G.displayMode?((0,l.wg)(),(0,l.iD)("div",v,[(0,l.Wm)(ee,{allDateRanges:J.paginatedDateRanges,quarterSummary:J.quarterSummary,quarterTableData:J.paginatedData},null,8,["allDateRanges","quarterSummary","quarterTableData"]),(0,l.Wm)(u.k,{modelValue:G.currentPage,"onUpdate:modelValue":a[5]||(a[5]=e=>G.currentPage=e),length:J.totalPages},null,8,["modelValue","length"])])):(0,l.kq)("",!0),G.showDetails||"table"!==G.displayMode?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",M,[(0,l.Wm)(ae,{allDateRanges:J.paginatedDateRanges,quarterSummary:J.quarterSummary,TableData:J.paginatedData},null,8,["allDateRanges","quarterSummary","TableData"]),(0,l.Wm)(u.k,{modelValue:G.currentPage,"onUpdate:modelValue":a[6]||(a[6]=e=>G.currentPage=e),length:J.totalPages},null,8,["modelValue","length"])])),"report"!==G.displayMode||G.showDetails?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",T,[(0,l.Wm)(te,{chartData:G.chartData},null,8,["chartData"])])),"report"===G.displayMode&&G.showDetails&&"quarter"===G.timeMode?((0,l.wg)(),(0,l.iD)("div",S,[(0,l.Wm)(te,{chartData:G.chartData},null,8,["chartData"])])):(0,l.kq)("",!0),"report"===G.displayMode&&G.showDetails&&"week"===G.timeMode?((0,l.wg)(),(0,l.iD)("div",C,[(0,l.Wm)(te,{chartData:G.chartData},null,8,["chartData"])])):(0,l.kq)("",!0),(0,l._)("div",W,[(0,l.Wm)(c.t,{color:"blue"},{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-chevron-right-box")])),_:1}),P],512),"table"===G.displayMode?((0,l.wg)(),(0,l.j4)(s._,{key:6,class:"div-container-1",outlined:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g.d,{modelValue:G.tab,"onUpdate:modelValue":a[7]||(a[7]=e=>G.tab=e),"bg-color":"indigo-darken-2","slider-color":"yellow","show-arrows":""},{default:(0,l.w5)((()=>[(0,l.Wm)(p.L,{style:{"font-weight":"bold"},value:"civil"},{default:(0,l.w5)((()=>[(0,l.Uk)("土木工程")])),_:1}),(0,l.Wm)(p.L,{style:{"font-weight":"bold"},value:"cable"},{default:(0,l.w5)((()=>[(0,l.Uk)("纜線工程")])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(d.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h.Oo,{modelValue:G.tab,"onUpdate:modelValue":a[20]||(a[20]=e=>G.tab=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(m.H,{value:"civil"},{default:(0,l.w5)((()=>[(0,l._)("div",V,[(0,l._)("div",N,[U,(0,l.Wm)(o.T,{class:(0,r.C_)("table"===G.endisplayMode?"report-btn":"table-btn"),onClick:J.toggleEnDisplayMode},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(J.endisplayModeText),1)])),_:1},8,["class","onClick"])]),G.enshowDetails&&"table"===G.endisplayMode?((0,l.wg)(),(0,l.iD)("div",R,[(0,l.Wm)(n.fF,{mandatory:"",modelValue:G.entimeMode,"onUpdate:modelValue":a[8]||(a[8]=e=>G.entimeMode=e),class:"time-toggle",variant:"outlined"},{default:(0,l.w5)((()=>[(0,l.Wm)(o.T,{value:"quarter"},{default:(0,l.w5)((()=>[(0,l.Uk)("季")])),_:1}),(0,l.Wm)(o.T,{value:"week"},{default:(0,l.w5)((()=>[(0,l.Uk)("週")])),_:1})])),_:1},8,["modelValue"])])):(0,l.kq)("",!0),"table"===G.endisplayMode?((0,l.wg)(),(0,l.iD)("div",$,[(0,l.Wm)(o.T,{class:"overview-btn",rounded:"0",onClick:a[9]||(a[9]=e=>G.enshowDetails=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("即時")])),_:1}),(0,l.Wm)(o.T,{class:"details-btn",rounded:"0",onClick:a[10]||(a[10]=e=>G.enshowDetails=!0)},{default:(0,l.w5)((()=>[(0,l.Uk)("詳情")])),_:1})])):(0,l.kq)("",!0)]),"week"===G.entimeMode&&G.enshowDetails&&"table"===G.endisplayMode?((0,l.wg)(),(0,l.iD)("div",E,[(0,l.Wm)(X,{allDateRanges:J.enpaginatedDateRanges,weekTableData:J.enpaginatedData},null,8,["allDateRanges","weekTableData"]),(0,l.Wm)(u.k,{modelValue:G.currentPage,"onUpdate:modelValue":a[11]||(a[11]=e=>G.currentPage=e),length:J.totalPages},null,8,["modelValue","length"])])):(0,l.kq)("",!0),"quarter"===G.entimeMode&&G.enshowDetails&&"table"===G.endisplayMode?((0,l.wg)(),(0,l.iD)("div",A,[(0,l.Wm)(ee,{allDateRanges:J.enpaginatedDateRanges,quarterSummary:J.enquarterSummary,quarterTableData:J.enpaginatedData},null,8,["allDateRanges","quarterSummary","quarterTableData"]),(0,l.Wm)(u.k,{modelValue:G.currentPage,"onUpdate:modelValue":a[12]||(a[12]=e=>G.currentPage=e),length:J.totalPages},null,8,["modelValue","length"])])):(0,l.kq)("",!0),G.enshowDetails||"table"!==G.endisplayMode?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",j,[(0,l.Wm)(ae,{allDateRanges:J.enpaginatedDateRanges,quarterSummary:J.enquarterSummary,TableData:J.enpaginatedData},null,8,["allDateRanges","quarterSummary","TableData"]),(0,l.Wm)(u.k,{modelValue:G.currentPage,"onUpdate:modelValue":a[13]||(a[13]=e=>G.currentPage=e),length:J.totalPages},null,8,["modelValue","length"])])),"report"!==G.endisplayMode||G.enshowDetails?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",L,[(0,l.Wm)(te,{chartData:G.enchartData},null,8,["chartData"])])),"report"===G.endisplayMode&&G.enshowDetails&&"quarter"===G.entimeMode?((0,l.wg)(),(0,l.iD)("div",Q,[(0,l.Wm)(te,{chartData:G.enchartData},null,8,["chartData"])])):(0,l.kq)("",!0),"report"===G.endisplayMode&&G.enshowDetails&&"week"===G.entimeMode?((0,l.wg)(),(0,l.iD)("div",z,[(0,l.Wm)(te,{chartData:G.enchartData},null,8,["chartData"])])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(m.H,{value:"cable"},{default:(0,l.w5)((()=>[(0,l._)("div",F,[(0,l._)("div",O,[Y,(0,l.Wm)(o.T,{class:(0,r.C_)("table"===G.endisplayMode?"report-btn":"table-btn"),onClick:J.toggleEnDisplayMode},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(J.endisplayModeText),1)])),_:1},8,["class","onClick"])]),G.enshowDetails&&"table"===G.endisplayMode?((0,l.wg)(),(0,l.iD)("div",Z,[(0,l.Wm)(n.fF,{mandatory:"",modelValue:G.entimeMode,"onUpdate:modelValue":a[14]||(a[14]=e=>G.entimeMode=e),class:"time-toggle",variant:"outlined"},{default:(0,l.w5)((()=>[(0,l.Wm)(o.T,{value:"quarter"},{default:(0,l.w5)((()=>[(0,l.Uk)("季")])),_:1}),(0,l.Wm)(o.T,{value:"week"},{default:(0,l.w5)((()=>[(0,l.Uk)("週")])),_:1})])),_:1},8,["modelValue"])])):(0,l.kq)("",!0),"table"===G.endisplayMode?((0,l.wg)(),(0,l.iD)("div",H,[(0,l.Wm)(o.T,{class:"overview-btn",rounded:"0",onClick:a[15]||(a[15]=e=>G.enshowDetails=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("即時")])),_:1}),(0,l.Wm)(o.T,{class:"details-btn",rounded:"0",onClick:a[16]||(a[16]=e=>G.enshowDetails=!0)},{default:(0,l.w5)((()=>[(0,l.Uk)("詳情")])),_:1})])):(0,l.kq)("",!0)]),"week"===G.entimeMode&&G.enshowDetails?((0,l.wg)(),(0,l.iD)("div",K,[(0,l.Wm)(X,{allDateRanges:J.enpaginatedDateRanges,weekTableData:J.enpaginatedData},null,8,["allDateRanges","weekTableData"]),(0,l.Wm)(u.k,{modelValue:G.currentPage,"onUpdate:modelValue":a[17]||(a[17]=e=>G.currentPage=e),length:J.totalPages},null,8,["modelValue","length"])])):(0,l.kq)("",!0),"quarter"===G.entimeMode&&G.enshowDetails?((0,l.wg)(),(0,l.iD)("div",I,[(0,l.Wm)(ee,{allDateRanges:J.enpaginatedDateRanges,quarterSummary:J.enquarterSummary,quarterTableData:J.enpaginatedData},null,8,["allDateRanges","quarterSummary","quarterTableData"]),(0,l.Wm)(u.k,{modelValue:G.currentPage,"onUpdate:modelValue":a[18]||(a[18]=e=>G.currentPage=e),length:J.totalPages},null,8,["modelValue","length"])])):(0,l.kq)("",!0),G.enshowDetails||"table"!==G.endisplayMode?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",B,[(0,l.Wm)(ae,{allDateRanges:J.enpaginatedDateRanges,quarterSummary:J.enquarterSummary,TableData:J.enpaginatedData},null,8,["allDateRanges","quarterSummary","TableData"]),(0,l.Wm)(u.k,{modelValue:G.currentPage,"onUpdate:modelValue":a[19]||(a[19]=e=>G.currentPage=e),length:J.totalPages},null,8,["modelValue","length"])]))])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})):(0,l.kq)("",!0)])),_:1})}t(560);var J=t(7307),X=t(7319),ee=t(3406),ae=t(9729),te={components:{WeekLoopTable:X.Z,AllQuarterLoopTable:ee.Z,QuarterLoopTable:ae.Z,SiteSelectionChart:J.Z},data(){return{tab:"civil",timeMode:"week",entimeMode:"week",displayMode:"table",endisplayMode:"table",projectType:"engineering",showDetails:!1,enshowDetails:!1,weekTableData:[{actual:0,date_range:"2024-01-07 - 2024-01-13",expected:.0238,loop_name:"SN1"},{actual:0,date_range:"2024-01-07 - 2024-01-13",expected:.0238,loop_name:"SN2"},{actual:0,date_range:"2024-01-14 - 2024-01-20",expected:.0476,loop_name:"SN1"},{actual:0,date_range:"2024-01-14 - 2024-01-20",expected:.0476,loop_name:"SN2"},{actual:.441,date_range:"2024-01-21 - 2024-01-27",expected:.0714,loop_name:"SN1"},{actual:.4007,date_range:"2024-01-21 - 2024-01-27",expected:.0714,loop_name:"SN2"},{actual:.441,date_range:"2024-01-28 - 2024-02-03",expected:.0952,loop_name:"SN1"},{actual:.4007,date_range:"2024-01-28 - 2024-02-03",expected:.0952,loop_name:"SN2"},{actual:.441,date_range:"2024-02-04 - 2024-02-10",expected:.119,loop_name:"SN1"},{actual:.4007,date_range:"2024-02-04 - 2024-02-10",expected:.119,loop_name:"SN2"},{actual:.441,date_range:"2024-02-11 - 2024-02-17",expected:.1429,loop_name:"SN1"},{actual:.4007,date_range:"2024-02-11 - 2024-02-17",expected:.1429,loop_name:"SN2"},{actual:.441,date_range:"2024-02-18 - 2024-02-24",expected:.1667,loop_name:"SN1"},{actual:.4007,date_range:"2024-02-18 - 2024-02-24",expected:.1667,loop_name:"SN2"},{actual:.4463,date_range:"2024-02-25 - 2024-03-02",expected:.1905,loop_name:"SN1"},{actual:.4081,date_range:"2024-02-25 - 2024-03-02",expected:.1905,loop_name:"SN2"}],quarterTableData:[{actual:.4463,date_range:"2024-02-25 - 2024-03-02",expected:.1905,loop_name:"SN1",year:2024,quarter:1,week:9},{actual:.4081,date_range:"2024-02-25 - 2024-03-02",expected:.1905,loop_name:"SN2",year:2024,quarter:1,week:9}],TableData:[{actual:.4463,date_range:"2024-02-25 - 2024-03-02",expected:.1905,loop_name:"SN1",year:2024,quarter:1,week:9},{actual:.4081,date_range:"2024-02-25 - 2024-03-02",expected:.1905,loop_name:"SN2",year:2024,quarter:1,week:9}],civilweekTableData:[{actual:0,date_range:"2024-01-07 - 2024-01-13",expected:.0476,loop_name:"SN1"},{actual:0,date_range:"2024-01-07 - 2024-01-13",expected:.0476,loop_name:"SN2"},{actual:0,date_range:"2024-01-14 - 2024-01-20",expected:.0952,loop_name:"SN1"},{actual:0,date_range:"2024-01-14 - 2024-01-20",expected:.0952,loop_name:"SN2"},{actual:.8819,date_range:"2024-01-21 - 2024-01-27",expected:.1429,loop_name:"SN1"},{actual:.8013,date_range:"2024-01-21 - 2024-01-27",expected:.1429,loop_name:"SN2"},{actual:.8819,date_range:"2024-01-28 - 2024-02-03",expected:.1905,loop_name:"SN1"},{actual:.8013,date_range:"2024-01-28 - 2024-02-03",expected:.1905,loop_name:"SN2"},{actual:.8819,date_range:"2024-02-04 - 2024-02-10",expected:.2381,loop_name:"SN1"},{actual:.8013,date_range:"2024-02-04 - 2024-02-10",expected:.2381,loop_name:"SN2"},{actual:.8819,date_range:"2024-02-11 - 2024-02-17",expected:.2857,loop_name:"SN1"},{actual:.8013,date_range:"2024-02-11 - 2024-02-17",expected:.2857,loop_name:"SN2"},{actual:.8819,date_range:"2024-02-18 - 2024-02-24",expected:.3333,loop_name:"SN1"},{actual:.8013,date_range:"2024-02-18 - 2024-02-24",expected:.3333,loop_name:"SN2"},{actual:.8926,date_range:"2024-02-25 - 2024-03-02",expected:.381,loop_name:"SN1"},{actual:.8162,date_range:"2024-02-25 - 2024-03-02",expected:.381,loop_name:"SN2"}],civilquarterTableData:[{actual:.8926,date_range:"2024-02-25 - 2024-03-02",expected:.381,loop_name:"SN1",year:2024,quarter:1,week:9},{actual:.8162,date_range:"2024-02-25 - 2024-03-02",expected:.381,loop_name:"SN2",year:2024,quarter:1,week:9}],civilTableData:[{actual:.8926,date_range:"2024-02-25 - 2024-03-02",expected:.381,loop_name:"SN1",year:2024,quarter:1,week:9},{actual:.8162,date_range:"2024-02-25 - 2024-03-02",expected:.381,loop_name:"SN2",year:2024,quarter:1,week:9}],currentPage:1,perPage:3,chartData:{labels:[],datasets:[]},enchartData:{labels:[],datasets:[]}}},watch:{endisplayMode(){this.enupdateChartData()},entimeMode(){this.enupdateChartData()},enshowDetails(){this.enupdateChartData()},displayMode(){this.updateChartData()},timeMode(){this.updateChartData()},showDetails(){this.updateChartData()}},async created(){this.selectedPlan=this.$route.query.Plan,this.selectedProject=this.$route.query.Project},mounted(){this.updateChartData(),this.enupdateChartData()},computed:{displayModeText(){return"table"===this.displayMode?"表格":"報表"},endisplayModeText(){return"table"===this.endisplayMode?"表格":"報表"},projectTypeText(){return"engineering"===this.projectType?"工程":"銀行"},allDateRanges(){const e=new Set;return this.organizedLoopsData.forEach((a=>{a.date_ranges.forEach((a=>{e.add(a.date_range)}))})),Array.from(e)},quarterSummary(){let e=this.organizedLoopsData;if(console.log(e),!e.length)return[];const a=new Set;return e.forEach((e=>{e.date_ranges.forEach((e=>{const t=`${e.year}-Q${e.quarter}-${e.week}`;a.add(t)}))})),Array.from(a).map((e=>{const[a,t,l]=e.split("-");return{year:a,quarter:t.replace("Q",""),week:l}}))},totalPages(){const e=this.allDateRanges.length;return Math.ceil(e/this.perPage)},paginatedData(){const e=(this.currentPage-1)*this.perPage,a=e+this.perPage,t=this.organizedLoopsData.map((t=>({...t,date_ranges:t.date_ranges.slice(e,a)})));return console.log(t),t},paginatedDateRanges(){const e=(this.currentPage-1)*this.perPage,a=e+this.perPage;return this.allDateRanges.slice(e,a)},organizedLoopsData(){const e=[],a=new Map;let t=[];return this.showDetails?"quarter"===this.timeMode?t=this.quarterTableData:"week"===this.timeMode&&(t=this.weekTableData):t=this.TableData,t.forEach((e=>{const{loop_name:t,date_range:l,actual:r,expected:o,year:n,quarter:s,week:d}=e;a.has(t)||a.set(t,{loop_name:t,date_ranges:[]});const i=a.get(t);let c=i.date_ranges.find((e=>e.date_range===l));c||(c={date_range:l,records:[],year:n,quarter:s,week:d},i.date_ranges.push(c)),c.records.push({actual:r,expected:o})})),a.forEach((a=>{a.date_ranges.sort(((e,a)=>{const t=new Date(e.date_range.split(" - ")[0]),l=new Date(a.date_range.split(" - ")[0]);return t-l})),e.push(a)})),e},enorganizedLoopsData(){const e=[],a=new Map;let t=[];return"civil"===this.tab&&(this.enshowDetails?"quarter"===this.entimeMode?t=this.civilquarterTableData:"week"===this.entimeMode&&(t=this.civilweekTableData):t=this.civilTableData),t.forEach((e=>{const{loop_name:t,date_range:l,actual:r,expected:o,year:n,quarter:s,week:d}=e;a.has(t)||a.set(t,{loop_name:t,date_ranges:[]});const i=a.get(t);let c=i.date_ranges.find((e=>e.date_range===l));c||(c={date_range:l,records:[],year:n,quarter:s,week:d},i.date_ranges.push(c)),c.records.push({actual:r,expected:o})})),a.forEach((a=>{a.date_ranges.sort(((e,a)=>{const t=new Date(e.date_range.split(" - ")[0]),l=new Date(a.date_range.split(" - ")[0]);return t-l})),e.push(a)})),e},enallDateRanges(){const e=new Set;return this.enorganizedLoopsData.forEach((a=>{a.date_ranges.forEach((a=>{e.add(a.date_range)}))})),Array.from(e)},enpaginatedDateRanges(){const e=(this.currentPage-1)*this.perPage,a=e+this.perPage;return this.enallDateRanges.slice(e,a)},enquarterSummary(){let e=this.enorganizedLoopsData;if(console.log(e),!e.length)return[];const a=new Set;return e.forEach((e=>{e.date_ranges.forEach((e=>{const t=`${e.year}-Q${e.quarter}-${e.week}`;a.add(t)}))})),Array.from(a).map((e=>{const[a,t,l]=e.split("-");return{year:a,quarter:t.replace("Q",""),week:l}}))},enpaginatedData(){const e=(this.currentPage-1)*this.perPage,a=e+this.perPage,t=this.enorganizedLoopsData.map((t=>({...t,date_ranges:t.date_ranges.slice(e,a)})));return console.log(t),t}},methods:{scrollToSection(e){const a=this.$refs[e];if(a){const e=a.offsetTop-100;window.scrollTo({top:e,behavior:"smooth"})}},toggleDisplayMode(){"table"===this.displayMode?(this.previousTimeMode=this.timeMode,this.previousShowDetails=this.showDetails,this.displayMode="report"):(this.displayMode="table",this.timeMode=this.previousTimeMode,this.showDetails=this.previousShowDetails)},toggleProjectType(){this.projectType="engineering"===this.projectType?"bank":"engineering"},formatPercentage(e){return`${(100*Number(e)).toFixed(2)}%`},toggleEnDisplayMode(){"table"===this.endisplayMode?(this.enpreviousTimeMode=this.entimeMode,this.enpreviousShowDetails=this.enshowDetails,this.endisplayMode="report"):(this.endisplayMode="table",this.entimeMode=this.enpreviousTimeMode,this.enshowDetails=this.enpreviousShowDetails)},generateChartData(){const e=(new Date).getFullYear(),a=this.TableData.filter((a=>a.year===e)),t=new Set(a.map((e=>`Q${e.quarter}`))),l=Array.from(t).sort(),r=new Map;a.forEach((e=>{const a=`Q${e.quarter}`,t=e.loop_name;r.has(t)||r.set(t,{actual:Array(l.length).fill(null),expected:Array(l.length).fill(null)});const o=r.get(t),n=l.indexOf(a);-1!==n&&(o.actual[n]=100*e.actual,o.expected[n]=100*e.expected)}));const o=[{color:"rgba(255, 99, 132, 0.2)"},{color:"rgba(75, 192, 192, 0.2)"},{color:"rgba(255, 206, 86, 0.2)"}];let n=0;const s=[];return r.forEach(((e,a)=>{const t=o[n++%o.length].color;s.push({label:`${a} Actual`,data:e.actual,backgroundColor:t,borderColor:t.replace("0.2","1"),borderWidth:5}),s.push({label:`${a} Expected`,data:e.expected,backgroundColor:t,borderColor:t.replace("0.2","1"),borderDash:[5,5]})})),{labels:l,datasets:s}},generateyearChartData(){const e=(new Date).getFullYear(),a=this.quarterTableData.filter((a=>a.year===e)),t=[...new Set(a.map((e=>`${e.year}Q${e.quarter}`)))].sort(),l=new Map;a.forEach((e=>{const a=`${e.year}Q${e.quarter}`,r=e.loop_name;l.has(r)||l.set(r,{actual:Array(t.length).fill(null),expected:Array(t.length).fill(null)});const o=l.get(r),n=t.indexOf(a);-1!==n&&(o.actual[n]=100*e.actual,o.expected[n]=100*e.expected)}));const r=[{color:"rgba(255, 99, 132, 0.2)"},{color:"rgba(75, 192, 192, 0.2)"},{color:"rgba(255, 206, 86, 0.2)"}];let o=0;const n=[];return l.forEach(((e,a)=>{const t=r[o++%r.length].color;n.push({label:`${a} Actual`,data:e.actual,backgroundColor:t,borderColor:t.replace("0.2","1"),borderWidth:5}),n.push({label:`${a} Expected`,data:e.expected,backgroundColor:t,borderColor:t.replace("0.2","1"),borderDash:[5,5]})})),{labels:t,datasets:n}},generatedaterangeChartData(){(new Date).getFullYear();const e=this.weekTableData,a=[...new Set(e.map((e=>e.date_range)))].sort(),t=new Map;e.forEach((e=>{const l=e.date_range,r=e.loop_name;t.has(r)||t.set(r,{actual:Array(a.length).fill(null),expected:Array(a.length).fill(null)});const o=t.get(r),n=a.indexOf(l);-1!==n&&(o.actual[n]=100*e.actual,o.expected[n]=100*e.expected)}));const l=[{color:"rgba(255, 99, 132, 0.2)"},{color:"rgba(75, 192, 192, 0.2)"},{color:"rgba(255, 206, 86, 0.2)"},{color:"rgba(153, 102, 255, 0.2)"},{color:"rgba(255, 159, 64, 0.2)"},{color:"rgba(54, 162, 235, 0.2)"},{color:"rgba(104, 132, 245, 0.2)"},{color:"rgba(164, 206, 78, 0.2)"},{color:"rgba(215, 86, 255, 0.2)"}];let r=0;const o=[];return t.forEach(((e,a)=>{const t=l[r++%l.length].color;o.push({label:`${a} Actual`,data:e.actual,backgroundColor:t,borderColor:t.replace("0.2","1"),borderWidth:5}),o.push({label:`${a} Expected`,data:e.expected,backgroundColor:t,borderColor:t.replace("0.2","1"),borderDash:[5,5]})})),{labels:a,datasets:o}},updateChartData(){this.showDetails?"quarter"===this.timeMode?this.chartData=this.generateyearChartData():"week"===this.timeMode&&(this.chartData=this.generatedaterangeChartData()):this.chartData=this.generateChartData()},engenerateChartData(){const e=(new Date).getFullYear(),a=this.civilTableData.filter((a=>a.year===e)),t=new Set(a.map((e=>`Q${e.quarter}`))),l=Array.from(t).sort(),r=new Map;a.forEach((e=>{const a=`Q${e.quarter}`,t=e.loop_name;r.has(t)||r.set(t,{actual:Array(l.length).fill(null),expected:Array(l.length).fill(null)});const o=r.get(t),n=l.indexOf(a);-1!==n&&(o.actual[n]=100*e.actual,o.expected[n]=100*e.expected)}));const o=[{color:"rgba(255, 99, 132, 0.2)"},{color:"rgba(75, 192, 192, 0.2)"},{color:"rgba(255, 206, 86, 0.2)"}];let n=0;const s=[];return r.forEach(((e,a)=>{const t=o[n++%o.length].color;s.push({label:`${a} Actual`,data:e.actual,backgroundColor:t,borderColor:t.replace("0.2","1"),borderWidth:5}),s.push({label:`${a} Expected`,data:e.expected,backgroundColor:t,borderColor:t.replace("0.2","1"),borderDash:[5,5]})})),{labels:l,datasets:s}},engenerateyearChartData(){const e=(new Date).getFullYear(),a=this.civilquarterTableData.filter((a=>a.year===e)),t=[...new Set(a.map((e=>`${e.year}Q${e.quarter}`)))].sort(),l=new Map;a.forEach((e=>{const a=`${e.year}Q${e.quarter}`,r=e.loop_name;l.has(r)||l.set(r,{actual:Array(t.length).fill(null),expected:Array(t.length).fill(null)});const o=l.get(r),n=t.indexOf(a);-1!==n&&(o.actual[n]=100*e.actual,o.expected[n]=100*e.expected)}));const r=[{color:"rgba(255, 99, 132, 0.2)"},{color:"rgba(75, 192, 192, 0.2)"},{color:"rgba(255, 206, 86, 0.2)"}];let o=0;const n=[];return l.forEach(((e,a)=>{const t=r[o++%r.length].color;n.push({label:`${a} Actual`,data:e.actual,backgroundColor:t,borderColor:t.replace("0.2","1"),borderWidth:5}),n.push({label:`${a} Expected`,data:e.expected,backgroundColor:t,borderColor:t.replace("0.2","1"),borderDash:[5,5]})})),{labels:t,datasets:n}},engeneratedaterangeChartData(){(new Date).getFullYear();const e=this.civilweekTableData,a=[...new Set(e.map((e=>e.date_range)))].sort(),t=new Map;e.forEach((e=>{const l=e.date_range,r=e.loop_name;t.has(r)||t.set(r,{actual:Array(a.length).fill(null),expected:Array(a.length).fill(null)});const o=t.get(r),n=a.indexOf(l);-1!==n&&(o.actual[n]=100*e.actual,o.expected[n]=100*e.expected)}));const l=[{color:"rgba(255, 99, 132, 0.2)"},{color:"rgba(75, 192, 192, 0.2)"},{color:"rgba(255, 206, 86, 0.2)"},{color:"rgba(153, 102, 255, 0.2)"},{color:"rgba(255, 159, 64, 0.2)"},{color:"rgba(54, 162, 235, 0.2)"},{color:"rgba(104, 132, 245, 0.2)"},{color:"rgba(164, 206, 78, 0.2)"},{color:"rgba(215, 86, 255, 0.2)"}];let r=0;const o=[];return t.forEach(((e,a)=>{const t=l[r++%l.length].color;o.push({label:`${a} Actual`,data:e.actual,backgroundColor:t,borderColor:t.replace("0.2","1"),borderWidth:5}),o.push({label:`${a} Expected`,data:e.expected,backgroundColor:t,borderColor:t.replace("0.2","1"),borderDash:[5,5]})})),{labels:a,datasets:o}},enupdateChartData(){this.enshowDetails?"quarter"===this.entimeMode?this.enchartData=this.engenerateyearChartData():"week"===this.timeMode&&(this.enchartData=this.engeneratedaterangeChartData()):this.enchartData=this.engenerateChartData()}}},le=t(3744);const re=(0,le.Z)(te,[["render",G],["__scopeId","data-v-15e77a7c"]]);var oe=re}}]);
//# sourceMappingURL=670.37cd34e4.js.map