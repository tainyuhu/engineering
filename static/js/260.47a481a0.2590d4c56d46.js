"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[260],{9022:function(e,t,a){var l=a(5121);const s=l.Z.create({baseURL:"/",headers:{"Content-Type":"application/json"}});s.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>(console.error("Request error:",e),Promise.reject(e)))),s.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(window.location.href="/login"),Promise.reject(e)))),t.Z=s},440:function(e,t,a){a.d(t,{ZQ:function(){return r},bl:function(){return n},dc:function(){return o},ky:function(){return i},m0:function(){return d},z:function(){return s}});var l=a(9022);const s=()=>l.Z.get("/api/v1/meetingrecord/"),o=()=>l.Z.get("/api/v1/fileprogress/"),i=()=>l.Z.get("/api/v1/fileprogressphase/"),r=()=>l.Z.get("/api/v1/plans/"),n=()=>l.Z.get("/api/v1/projects/"),d=e=>l.Z.get(`/api/v1/project-loops-by-project/${e}/`)},2260:function(e,t,a){a.r(t),a.d(t,{default:function(){return H}});var l=a(6252),s=a(9963),o=a(3577),i=a(9095),r=a(5215),n=a(5911),d=a(1669),c=a(7737),u=a(2793),m=a(8069),p=a(2762),h=a(401),g=a(3345),w=a(6393),f=a(2199),_=a(7070);const k=e=>((0,l.dD)("data-v-a047dc1a"),e=e(),(0,l.Cn)(),e),y={class:"mb-5",style:{"padding-left":"20px",display:"flex","align-items":"center"}},b=k((()=>(0,l._)("span",{class:"font-weight-bold ml-2"},"文件列表：",-1))),v={class:"search-container"},P={class:"table-header"},D=k((()=>(0,l._)("th",{class:"font-weight-bold"},"更新描述",-1))),U=["onClick"],W={class:"pagination-container"},C={class:"select-actions d-none d-md-flex"},V=k((()=>(0,l._)("span",{class:"font-weight-bold ml-2"},"每頁顯示：",-1))),B={class:"pagination-actions"},z={class:"table-header"},j=k((()=>(0,l._)("th",{class:"font-weight-bold"},"更新描述",-1))),q=["onClick"],F={class:"pagination-container"},Z={class:"select-actions d-none d-md-flex"},x=k((()=>(0,l._)("span",{class:"font-weight-bold ml-2"},"每頁顯示：",-1))),L={class:"pagination-actions"};function $(e,t,a,k,$,I){return(0,l.wg)(),(0,l.j4)(d.K,null,{default:(0,l.w5)((()=>[(0,l._)("div",y,[(0,l.Wm)(c.t,{class:"title-icon",color:"blue"},{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-chevron-right-box")])),_:1}),b,(0,l._)("div",v,[(0,l.Wm)(w.h,{modelValue:$.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>$.searchQuery=e),variant:"solo","prepend-inner-icon":"mdi-magnify",label:"請輸入關鍵字搜尋","single-line":"","hide-details":"",class:"search-input",onKeyup:(0,s.D2)(I.fetchData,["enter"])},null,8,["modelValue","onKeyup"])])]),(0,l.Wm)(r._,{class:"elevated-card",outlined:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h.d,{"bg-color":"indigo-darken-2",modelValue:$.tab,"onUpdate:modelValue":t[1]||(t[1]=e=>$.tab=e),"show-arrows":""},{default:(0,l.w5)((()=>[(0,l.Wm)(g.L,{style:{"font-weight":"bold"},value:"phase1"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Phase1 ")])),_:1}),(0,l.Wm)(g.L,{style:{"font-weight":"bold"},value:"phase2"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Phase2 ")])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(n.Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(f.Oo,{modelValue:$.tab,"onUpdate:modelValue":t[20]||(t[20]=e=>$.tab=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(_.H,{value:"phase1"},{default:(0,l.w5)((()=>[(0,l.Wm)(p.Y,{class:"elevated-table",width:"100%"},{default:(0,l.w5)((()=>[(0,l._)("thead",null,[(0,l._)("tr",P,[(0,l._)("th",{onClick:t[2]||(t[2]=e=>{$.sortBy="file_name",$.sortDesc=!$.sortDesc}),class:"font-weight-bold sortable"},[(0,l.Uk)(" 文件名稱 "),"file_name"===$.sortBy?((0,l.wg)(),(0,l.j4)(c.t,{key:0,small:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)($.sortDesc?"mdi-arrow-down":"mdi-arrow-up"),1)])),_:1})):(0,l.kq)("",!0)]),D,(0,l._)("th",{onClick:t[3]||(t[3]=e=>{$.sortBy="create_at",$.sortDesc=!$.sortDesc}),class:"font-weight-bold sortable"},[(0,l.Uk)(" 上傳時間 "),"create_at"===$.sortBy?((0,l.wg)(),(0,l.j4)(c.t,{key:0,small:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)($.sortDesc?"mdi-arrow-down":"mdi-arrow-up"),1)])),_:1})):(0,l.kq)("",!0)]),(0,l._)("th",{onClick:t[4]||(t[4]=e=>{$.sortBy="last_update",$.sortDesc=!$.sortDesc}),class:"font-weight-bold sortable"},[(0,l.Uk)(" 更新時間 "),"last_update"===$.sortBy?((0,l.wg)(),(0,l.j4)(c.t,{key:0,small:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)($.sortDesc?"mdi-arrow-down":"mdi-arrow-up"),1)])),_:1})):(0,l.kq)("",!0)])])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(I.paginatedFiles,((e,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:t,onClick:t=>I.viewFile(e),class:"table-row"},[(0,l._)("td",null,(0,o.zw)(e.file_name),1),(0,l._)("td",null,(0,o.zw)(e.update_description),1),(0,l._)("td",null,(0,o.zw)(e.create_at),1),(0,l._)("td",null,(0,o.zw)(e.last_update),1)],8,U)))),128))])])),_:1}),(0,l._)("div",W,[(0,l._)("div",C,[V,(0,l.Wm)(m.rL,{density:"compact",variant:"outlined",modelValue:$.itemsPerPage,"onUpdate:modelValue":t[5]||(t[5]=e=>$.itemsPerPage=e),items:$.itemsPerPageOptions,class:"items-per-page-select",onChange:t[6]||(t[6]=e=>$.page=1)},null,8,["modelValue","items"])]),(0,l._)("div",B,[(0,l.Wm)(i.T,{icon:"",small:"",variant:"text",onClick:t[7]||(t[7]=e=>$.page=1)},{default:(0,l.w5)((()=>[(0,l.Wm)(c.t,null,{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-page-first")])),_:1})])),_:1}),(0,l.Wm)(u.k,{modelValue:$.page,"onUpdate:modelValue":t[8]||(t[8]=e=>$.page=e),length:I.pages,"total-visible":1,class:"pagination","active-color":"#00b894",onInput:t[9]||(t[9]=e=>$.page=e)},null,8,["modelValue","length"]),(0,l.Wm)(i.T,{icon:"",small:"",variant:"text",onClick:t[10]||(t[10]=e=>$.page=I.pages)},{default:(0,l.w5)((()=>[(0,l.Wm)(c.t,null,{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-page-last")])),_:1})])),_:1})])])])),_:1}),(0,l.Wm)(_.H,{value:"phase2"},{default:(0,l.w5)((()=>[(0,l.Wm)(p.Y,{class:"elevated-table",width:"100%"},{default:(0,l.w5)((()=>[(0,l._)("thead",null,[(0,l._)("tr",z,[(0,l._)("th",{onClick:t[11]||(t[11]=e=>{$.sortBy="file_name",$.sortDesc=!$.sortDesc}),class:"font-weight-bold sortable"},[(0,l.Uk)(" 文件名稱 "),"file_name"===$.sortBy?((0,l.wg)(),(0,l.j4)(c.t,{key:0,small:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)($.sortDesc?"mdi-arrow-down":"mdi-arrow-up"),1)])),_:1})):(0,l.kq)("",!0)]),j,(0,l._)("th",{onClick:t[12]||(t[12]=e=>{$.sortBy="create_at",$.sortDesc=!$.sortDesc}),class:"font-weight-bold sortable"},[(0,l.Uk)(" 上傳時間 "),"create_at"===$.sortBy?((0,l.wg)(),(0,l.j4)(c.t,{key:0,small:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)($.sortDesc?"mdi-arrow-down":"mdi-arrow-up"),1)])),_:1})):(0,l.kq)("",!0)]),(0,l._)("th",{onClick:t[13]||(t[13]=e=>{$.sortBy="last_update",$.sortDesc=!$.sortDesc}),class:"font-weight-bold sortable"},[(0,l.Uk)(" 更新時間 "),"last_update"===$.sortBy?((0,l.wg)(),(0,l.j4)(c.t,{key:0,small:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)($.sortDesc?"mdi-arrow-down":"mdi-arrow-up"),1)])),_:1})):(0,l.kq)("",!0)])])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(I.paginatedFiles,((e,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:t,onClick:t=>I.viewFile(e),class:"table-row"},[(0,l._)("td",null,(0,o.zw)(e.file_name),1),(0,l._)("td",null,(0,o.zw)(e.update_description),1),(0,l._)("td",null,(0,o.zw)(e.create_at),1),(0,l._)("td",null,(0,o.zw)(e.last_update),1)],8,q)))),128))])])),_:1}),(0,l._)("div",F,[(0,l._)("div",Z,[x,(0,l.Wm)(m.rL,{density:"compact",variant:"outlined",modelValue:$.itemsPerPage,"onUpdate:modelValue":t[14]||(t[14]=e=>$.itemsPerPage=e),items:$.itemsPerPageOptions,class:"items-per-page-select",onChange:t[15]||(t[15]=e=>$.page=1)},null,8,["modelValue","items"])]),(0,l._)("div",L,[(0,l.Wm)(i.T,{icon:"",small:"",variant:"text",onClick:t[16]||(t[16]=e=>$.page=1)},{default:(0,l.w5)((()=>[(0,l.Wm)(c.t,null,{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-page-first")])),_:1})])),_:1}),(0,l.Wm)(u.k,{modelValue:$.page,"onUpdate:modelValue":t[17]||(t[17]=e=>$.page=e),length:I.pages,"total-visible":1,class:"pagination","active-color":"#00b894",onInput:t[18]||(t[18]=e=>$.page=e)},null,8,["modelValue","length"]),(0,l.Wm)(i.T,{icon:"",small:"",variant:"text",onClick:t[19]||(t[19]=e=>$.page=I.pages)},{default:(0,l.w5)((()=>[(0,l.Wm)(c.t,null,{default:(0,l.w5)((()=>[(0,l.Uk)("mdi-page-last")])),_:1})])),_:1})])])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})}a(560);var I=a(440),K={data(){return{tab:null,files:[],searchQuery:"",page:1,itemsPerPage:5,sortBy:null,sortDesc:!1,itemsPerPageOptions:[5,10,15,20]}},computed:{pages(){return Math.ceil(this.filteredFiles.length/this.itemsPerPage)},filteredFiles(){this.page=1;let e=this.files.filter((e=>e.file_name.toLowerCase().includes(this.searchQuery.toLowerCase())));return this.sortBy&&e.sort(((e,t)=>this.sortDesc?e[this.sortBy]<t[this.sortBy]?1:-1:e[this.sortBy]>t[this.sortBy]?1:-1)),e},paginatedFiles(){const e=(this.page-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredFiles.slice(e,t)}},async created(){this.$route.query.page&&(this.page=Number(this.$route.query.page)),this.$route.query.itemsPerPage&&(this.itemsPerPage=Number(this.$route.query.itemsPerPage)),await this.fetchData()},watch:{tab(e){"phase1"===e?this.fetchFilePhase():this.fetchData()}},methods:{viewFile(e){this.$router.push({name:e.routeName,params:{fileId:e.id},query:{fileLink:e.file_link,page:this.page,itemsPerPage:this.itemsPerPage}})},async fetchData(){try{const e=await(0,I.dc)();this.files=e.data.map((e=>({...e,create_at:this.formatDate(e.create_at),last_update:this.formatDate(e.last_update)})))}catch(e){console.error(e)}},async fetchFilePhase(){try{const e=await(0,I.ky)();this.files=e.data.map((e=>({...e,create_at:this.formatDate(e.create_at),last_update:this.formatDate(e.last_update)})))}catch(e){console.error(e)}},formatDate(e){const t=new Date(e);return t.toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}}},Q=a(3744);const T=(0,Q.Z)(K,[["render",$],["__scopeId","data-v-a047dc1a"]]);var H=T}}]);
//# sourceMappingURL=260.47a481a0.js.4d828b185da1.map