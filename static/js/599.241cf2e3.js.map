{"version":3,"file":"static/js/599.241cf2e3.js","mappings":"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","sources":["webpack://frontend/./src/api/apiService.js","webpack://frontend/./src/views/Browseprogress/Powerline_228KV_Details_copy.vue","webpack://frontend/./src/api/voltage228kProjectService.js","webpack://frontend/./src/views/Browseprogress/Powerline_228KV_Details_copy.vue?da24"],"sourcesContent":["import axios from \"axios\";\r\n\r\n// 創建 Axios 實例\r\nconst apiClient = axios.create({\r\n  baseURL: \"/\",\r\n  // baseURL: process.env.VUE_APP_API_BASE_URL, // 設置所有 Axios 請求的基本 URL。\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\n// 請求攔截器\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    // 檢查本地存取是否有 token\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    // 如果有 token，則添加道請求頭部\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n\r\n    // 返回配置\r\n    return config;\r\n  },\r\n  (error) => {\r\n    // 處理請求錯誤\r\n    console.error(\"Request error:\", error);\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// 響應攔截器\r\napiClient.interceptors.response.use(\r\n  (response) => {\r\n    // 處理響應數據\r\n    return response;\r\n  },\r\n  (error) => {\r\n    // 響應錯誤處理\r\n    if (error.response && error.response.status === 401) {\r\n      // 處理401未認證的錯誤，重訂定位到登入頁面\r\n      window.location.href = \"/login\";\r\n    }\r\n\r\n    // 顯示全局錯誤的消息\r\n    // alert(`錯誤提醒: ${error.message},請截圖回報管理人員`);\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default apiClient;\r\n","<template>\r\n  <v-container>\r\n    <!-- 標題 -->\r\n    <div class=\"mb-3\" style=\"padding-left: 20px; display: flex; align-items: center\">\r\n      <v-icon color=\"blue\" @click=\"goBack\">mdi-chevron-left-box</v-icon>\r\n      <span class=\"font-weight-bold ml-2\">瀏覽22.8KV工程進度：</span>\r\n    </div>\r\n\r\n    <!-- 功能列 -->\r\n    <div class=\"function-row\">\r\n      <!-- 第一個區塊 -->\r\n      <div class=\"status-and-page-size-selector\">\r\n        <span>狀態：</span>\r\n        <v-btn\r\n          :class=\"displayMode === 'table' ? 'report-btn' : 'table-btn'\"\r\n          @click=\"toggleDisplayMode\"\r\n          >{{ displayModeText }}</v-btn\r\n        >\r\n      </div>\r\n\r\n      <!-- 第二個區塊 -->\r\n      <div v-if=\"showDetails && displayMode === 'table'\" class=\"py-2 d-flex justify-center\">\r\n        <v-btn-toggle mandatory v-model=\"timeMode\" class=\"time-toggle\" variant=\"outlined\">\r\n          <v-btn value=\"quarter\">季</v-btn>\r\n          <v-btn value=\"week\">週</v-btn>\r\n        </v-btn-toggle>\r\n      </div>\r\n\r\n      <!-- 第三個區塊 -->\r\n      <div v-if=\"displayMode === 'table'\">\r\n        <v-btn\r\n          :class=\"projectType === 'engineering' ? 'bank-btn' : 'engineering-btn'\"\r\n          @click=\"toggleProjectType\"\r\n          >{{ projectTypeText }}</v-btn\r\n        >\r\n        <v-btn\r\n          v-if=\"projectType === 'engineering'\"\r\n          class=\"custom-btn\"\r\n          @click=\"scrollToSection('engineeringSection')\"\r\n        >\r\n          土木/纜線進度\r\n        </v-btn>\r\n        <v-btn\r\n          class=\"overview-btn\"\r\n          :class=\"{ 'btn-active': !showDetails }\"\r\n          rounded=\"0\"\r\n          variant=\"outlined\"\r\n          @click=\"showDetails = false\"\r\n        >\r\n          即時\r\n        </v-btn>\r\n        <v-btn\r\n          class=\"details-btn\"\r\n          :class=\"{ 'btn-active': showDetails }\"\r\n          rounded=\"0\"\r\n          variant=\"outlined\"\r\n          @click=\"showDetails = true\"\r\n        >\r\n          詳情\r\n        </v-btn>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 周數據展示 -->\r\n    <div class=\"div-container\" v-if=\"timeMode === 'week' && showDetails && displayMode === 'table'\">\r\n      <WeekLoopTable :allDateRanges=\"allDateRanges\" :weekTableData=\"weekTableData\" />\r\n      <!-- 分頁組件 -->\r\n      <v-pagination\r\n        v-model=\"currentPage\"\r\n        :length=\"totalPages\"\r\n        :total-visible=\"7\"\r\n        @input=\"fetchData\"\r\n      ></v-pagination>\r\n    </div>\r\n\r\n    <!-- 季數據展示 -->\r\n    <!-- <div\r\n      class=\"div-container\"\r\n      v-if=\"timeMode === 'quarter' && showDetails && displayMode === 'table'\"\r\n    >\r\n      <AllQuarterLoopTable\r\n        :allDateRanges=\"paginatedDateRanges\"\r\n        :quarterSummary=\"quarterSummary\"\r\n        :quarterTableData=\"paginatedData\"\r\n      />\r\n      <v-pagination v-model=\"currentPage\" :length=\"totalPages\"></v-pagination>\r\n    </div> -->\r\n\r\n    <!-- 即時數據展示 -->\r\n    <!-- <div class=\"div-container\" v-if=\"!showDetails && displayMode === 'table'\">\r\n      <QuarterLoopTable\r\n        :allDateRanges=\"paginatedDateRanges\"\r\n        :quarterSummary=\"quarterSummary\"\r\n        :TableData=\"paginatedData\"\r\n      />\r\n      <v-pagination v-model=\"currentPage\" :length=\"totalPages\"></v-pagination>\r\n    </div> -->\r\n\r\n    <!-- 案場即時報表展示 -->\r\n    <!-- <div\r\n      class=\"div-container report-container\"\r\n      v-if=\"displayMode === 'report' && !showDetails\"\r\n      style=\"background-color: white; display: flex; height: 100%\"\r\n    >\r\n      <SiteSelectionChart :chartData=\"chartData\" />\r\n    </div> -->\r\n\r\n    <!-- 案場所有季報表展示 -->\r\n    <!-- <div\r\n      class=\"div-container report-container\"\r\n      v-if=\"displayMode === 'report' && showDetails && timeMode === 'quarter'\"\r\n      style=\"background-color: white; display: flex; height: 100%\"\r\n    >\r\n      <SiteSelectionChart :chartData=\"chartData\" />\r\n    </div> -->\r\n\r\n    <!-- 案場所有周報表展示 -->\r\n    <!-- <div\r\n      class=\"div-container report-container\"\r\n      v-if=\"displayMode === 'report' && showDetails && timeMode === 'week'\"\r\n      style=\"background-color: white; display: flex; height: 100%\"\r\n    >\r\n      <SiteSelectionChart :chartData=\"chartData\" />\r\n    </div> -->\r\n\r\n    <!-- 子標題 -->\r\n    <!-- <div\r\n      class=\"mb-3\"\r\n      ref=\"engineeringSection\"\r\n      style=\"padding-left: 20px; display: flex; align-items: center\"\r\n    >\r\n      <v-icon color=\"blue\">mdi-chevron-right-box</v-icon>\r\n      <span class=\"font-weight-bold ml-2\">瀏覽土木/纜線工程進度：</span>\r\n    </div> -->\r\n\r\n    <!-- <v-card v-if=\"displayMode === 'table'\" class=\"div-container-1\" outlined>\r\n      <v-tabs v-model=\"tab\" bg-color=\"indigo-darken-2\" slider-color=\"yellow\" show-arrows>\r\n        <v-tab style=\"font-weight: bold\" value=\"civil\">土木工程</v-tab>\r\n        <v-tab style=\"font-weight: bold\" value=\"cable\">纜線工程</v-tab>\r\n      </v-tabs>\r\n      <v-card-text>\r\n        <v-window v-model=\"tab\">\r\n          <v-window-item value=\"civil\">\r\n            <div class=\"function-row\">\r\n              <div class=\"status-and-page-size-selector\">\r\n                <span>狀態：</span>\r\n                <v-btn\r\n                  :class=\"endisplayMode === 'table' ? 'report-btn' : 'table-btn'\"\r\n                  @click=\"toggleEnDisplayMode\"\r\n                  >{{ endisplayModeText }}</v-btn\r\n                >\r\n              </div>\r\n\r\n              <div\r\n                v-if=\"enshowDetails && endisplayMode === 'table'\"\r\n                class=\"py-2 d-flex justify-center\"\r\n              >\r\n                <v-btn-toggle mandatory v-model=\"entimeMode\" class=\"time-toggle\" variant=\"outlined\">\r\n                  <v-btn value=\"quarter\">季</v-btn>\r\n                  <v-btn value=\"week\">週</v-btn>\r\n                </v-btn-toggle>\r\n              </div>\r\n\r\n              <div v-if=\"endisplayMode === 'table'\">\r\n                <v-btn\r\n                  class=\"overview-btn\"\r\n                  :class=\"{ 'btn-active': !enshowDetails }\"\r\n                  rounded=\"0\"\r\n                  variant=\"outlined\"\r\n                  @click=\"enshowDetails = false\"\r\n                >\r\n                  即時\r\n                </v-btn>\r\n                <v-btn\r\n                  class=\"details-btn\"\r\n                  :class=\"{ 'btn-active': enshowDetails }\"\r\n                  rounded=\"0\"\r\n                  variant=\"outlined\"\r\n                  @click=\"enshowDetails = true\"\r\n                >\r\n                  詳情\r\n                </v-btn>\r\n              </div>\r\n            </div> -->\r\n    <!-- <div\r\n              class=\"div-container\"\r\n              v-if=\"entimeMode === 'week' && enshowDetails && endisplayMode === 'table'\"\r\n            >\r\n              <WeekLoopTable\r\n                :allDateRanges=\"enpaginatedDateRanges\"\r\n                :weekTableData=\"enpaginatedData\"\r\n              />\r\n              <v-pagination\r\n                v-model=\"currentPage\"\r\n                :length=\"totalPages\"\r\n                :total-visible=\"7\"\r\n                @input=\"fetchenData\"\r\n              ></v-pagination>\r\n            </div> -->\r\n\r\n    <!-- <div\r\n              class=\"div-container\"\r\n              v-if=\"entimeMode === 'quarter' && enshowDetails && endisplayMode === 'table'\"\r\n            >\r\n              <AllQuarterLoopTable\r\n                :allDateRanges=\"enpaginatedDateRanges\"\r\n                :quarterSummary=\"enquarterSummary\"\r\n                :quarterTableData=\"enpaginatedData\"\r\n              />\r\n              <v-pagination v-model=\"currentPage\" :length=\"totalPages\"></v-pagination>\r\n            </div> -->\r\n\r\n    <!-- 即時數據展示 -->\r\n    <!-- <div class=\"div-container\" v-if=\"!enshowDetails && endisplayMode === 'table'\">\r\n              <QuarterLoopTable\r\n                :allDateRanges=\"enpaginatedDateRanges\"\r\n                :quarterSummary=\"enquarterSummary\"\r\n                :TableData=\"enpaginatedData\"\r\n              />\r\n              <v-pagination v-model=\"currentPage\" :length=\"totalPages\"></v-pagination>\r\n            </div> -->\r\n\r\n    <!-- 案場即時報表展示 -->\r\n    <!-- <div\r\n              class=\"div-container report-container\"\r\n              v-if=\"endisplayMode === 'report' && !enshowDetails\"\r\n              style=\"background-color: white; display: flex; height: 100%\"\r\n            >\r\n              <SiteSelectionChart :chartData=\"enchartData\" />\r\n            </div> -->\r\n\r\n    <!-- 案場所有季報表展示 -->\r\n    <!-- <div\r\n              class=\"div-container report-container\"\r\n              v-if=\"endisplayMode === 'report' && enshowDetails && entimeMode === 'quarter'\"\r\n              style=\"background-color: white; display: flex; height: 100%\"\r\n            >\r\n              <SiteSelectionChart :chartData=\"enchartData\" />\r\n            </div> -->\r\n\r\n    <!-- 案場所有周報表展示 -->\r\n    <!-- <div\r\n              class=\"div-container report-container\"\r\n              v-if=\"endisplayMode === 'report' && enshowDetails && entimeMode === 'week'\"\r\n              style=\"background-color: white; display: flex; height: 100%\"\r\n            >\r\n              <SiteSelectionChart :chartData=\"enchartData\" />\r\n            </div> -->\r\n    <!-- </v-window-item>\r\n          <v-window-item value=\"cable\">\r\n            <div class=\"function-row\">\r\n              <div class=\"status-and-page-size-selector\">\r\n                <span>狀態：</span>\r\n                <v-btn\r\n                  :class=\"endisplayMode === 'table' ? 'report-btn' : 'table-btn'\"\r\n                  @click=\"toggleEnDisplayMode\"\r\n                  >{{ endisplayModeText }}</v-btn\r\n                >\r\n              </div>\r\n\r\n              <div\r\n                v-if=\"enshowDetails && endisplayMode === 'table'\"\r\n                class=\"py-2 d-flex justify-center\"\r\n              >\r\n                <v-btn-toggle mandatory v-model=\"entimeMode\" class=\"time-toggle\" variant=\"outlined\">\r\n                  <v-btn value=\"quarter\">季</v-btn>\r\n                  <v-btn value=\"week\">週</v-btn>\r\n                </v-btn-toggle>\r\n              </div>\r\n\r\n              <div v-if=\"endisplayMode === 'table'\">\r\n                <v-btn\r\n                  class=\"overview-btn\"\r\n                  :class=\"{ 'btn-active': !enshowDetails }\"\r\n                  rounded=\"0\"\r\n                  variant=\"outlined\"\r\n                  @click=\"enshowDetails = false\"\r\n                >\r\n                  即時\r\n                </v-btn>\r\n                <v-btn\r\n                  class=\"details-btn\"\r\n                  :class=\"{ 'btn-active': enshowDetails }\"\r\n                  rounded=\"0\"\r\n                  variant=\"outlined\"\r\n                  @click=\"enshowDetails = true\"\r\n                >\r\n                  詳情\r\n                </v-btn>\r\n              </div>\r\n            </div>\r\n          </v-window-item>\r\n        </v-window>\r\n      </v-card-text>\r\n    </v-card> -->\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport SiteSelectionChart from \"@/components/chart/SiteSelectionChart.vue\";\r\nimport WeekLoopTable from \"@/components/table/weekLoopTable.vue\";\r\nimport AllQuarterLoopTable from \"@/components/table/allQuarterLoopTable.vue\";\r\nimport QuarterLoopTable from \"@/components/table/quarterLoopTable.vue\";\r\nimport { fetchCivilWeekTableData, fetchWeekTableData } from \"@/api/voltage228kProjectService\";\r\n\r\nexport default {\r\n  components: {\r\n    WeekLoopTable,\r\n    AllQuarterLoopTable,\r\n    QuarterLoopTable,\r\n    SiteSelectionChart,\r\n  },\r\n  data() {\r\n    return {\r\n      tab: \"civil\",\r\n      timeMode: \"week\",\r\n      entimeMode: \"week\",\r\n      displayMode: \"table\",\r\n      endisplayMode: \"table\",\r\n      projectType: \"engineering\",\r\n      selectedProject: null,\r\n      showDetails: false,\r\n      enshowDetails: false,\r\n      weekTableData: [],\r\n      quarterTableData: [],\r\n      TableData: [],\r\n      civilWeekTableData: [],\r\n      civilQuarterTableData: [],\r\n      civilTableData: [],\r\n      cableWeekTableData: [],\r\n      cableQuarterTableData: [],\r\n      cableTableData: [],\r\n      itemsPerPage: 3,\r\n      currentPage: 1, //當前頁面\r\n      totalPages: 0, // 總頁數\r\n      chartData: {\r\n        labels: [],\r\n        datasets: [],\r\n      },\r\n      enchartData: {\r\n        labels: [],\r\n        datasets: [],\r\n      },\r\n    };\r\n  },\r\n  watch: {\r\n    showDetails: \"fetchData\",\r\n    currentPage: \"fetchData\",\r\n    projectType: \"fetchData\",\r\n    timeMode: \"fetchData\",\r\n    displayMode: \"fetchData\",\r\n  },\r\n  async created() {\r\n    this.selectedPlan = this.$route.query.Plan;\r\n    this.selectedProject = this.$route.query.Project;\r\n  },\r\n  computed: {\r\n    displayModeText() {\r\n      return this.displayMode === \"table\" ? \"表格\" : \"報表\";\r\n    },\r\n    projectTypeText() {\r\n      return this.projectType === \"engineering\" ? \"工程\" : \"銀行\";\r\n    },\r\n    allDateRanges() {\r\n      const ranges = new Set();\r\n      if (!this.showDetails) {\r\n        this.TableData.forEach((item) => {\r\n          item.date_ranges.forEach((range) => {\r\n            ranges.add(range.date_range);\r\n          });\r\n        });\r\n      } else if (this.timeMode === \"week\") {\r\n        this.weekTableData.forEach((item) => {\r\n          item.date_ranges.forEach((range) => {\r\n            ranges.add(range.date_range);\r\n          });\r\n        });\r\n      } else if (this.timeMode === \"quarter\") {\r\n        this.quarterTableData.forEach((item) => {\r\n          item.date_ranges.forEach((range) => {\r\n            ranges.add(range.date_range);\r\n          });\r\n        });\r\n      }\r\n      return Array.from(ranges);\r\n    },\r\n    quarterSummary() {\r\n      let data = this.showDetails ? this.quarterTableData : this.TableData;\r\n      if (!data.length) return [];\r\n\r\n      const summaries = new Set();\r\n\r\n      data.forEach((item) => {\r\n        item.date_ranges.forEach((range) => {\r\n          const identifier = `${range.year}-Q${range.quarter}-${range.week}`;\r\n\r\n          summaries.add(identifier);\r\n        });\r\n      });\r\n\r\n      return Array.from(summaries).map((summary) => {\r\n        const [year, quarter, week] = summary.split(\"-\");\r\n        return { year, quarter: quarter.replace(\"Q\", \"\"), week };\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      this.$router.go(-1);\r\n    },\r\n    toggleDisplayMode() {\r\n      if (this.displayMode === \"table\") {\r\n        this.previousTimeMode = this.timeMode;\r\n        this.previousShowDetails = this.showDetails;\r\n\r\n        this.displayMode = \"report\";\r\n      } else {\r\n        this.displayMode = \"table\";\r\n\r\n        this.timeMode = this.previousTimeMode;\r\n        this.showDetails = this.previousShowDetails;\r\n      }\r\n    },\r\n    organizeTableData(flatData) {\r\n      const organizedData = [];\r\n      const tempMap = new Map();\r\n\r\n      flatData.forEach((item) => {\r\n        const { loop_name, date_range, actual, expected, year, quarter, week } = item;\r\n\r\n        if (!tempMap.has(loop_name)) {\r\n          tempMap.set(loop_name, { loop_name, date_ranges: [] });\r\n        }\r\n\r\n        const currentPv = tempMap.get(loop_name);\r\n\r\n        let dateRangeObj = currentPv.date_ranges.find((dr) => dr.date_range === date_range);\r\n        if (!dateRangeObj) {\r\n          dateRangeObj = { date_range, records: [], year, quarter, week };\r\n          currentPv.date_ranges.push(dateRangeObj);\r\n        }\r\n\r\n        dateRangeObj.records.push({ actual, expected });\r\n\r\n        if (year !== undefined) dateRangeObj.year = year;\r\n        if (quarter !== undefined) dateRangeObj.quarter = quarter;\r\n        if (week !== undefined) dateRangeObj.week = week;\r\n      });\r\n\r\n      tempMap.forEach((value) => {\r\n        organizedData.push(value);\r\n      });\r\n      console.log(organizedData);\r\n      return organizedData;\r\n    },\r\n    async fetchData() {\r\n      try {\r\n        console.log(this.selectedProject, this.currentPage, this.itemsPerPage, this.projectType);\r\n\r\n        let response;\r\n        let responsechart;\r\n        if (!this.showDetails) {\r\n        } else if (this.showDetails && this.timeMode === \"week\") {\r\n          response = await fetchWeekTableData(\r\n            this.selectedProject,\r\n            this.currentPage,\r\n            this.itemsPerPage,\r\n            this.projectType\r\n          );\r\n          console.log(response.data.results);\r\n          this.weekTableData = this.organizeTableData(response.data.results);\r\n        } else if (this.showDetails && this.timeMode === \"quarter\") {\r\n        } else {\r\n          console.error(\"Invalid time mode:\", this.timeMode);\r\n          return;\r\n        }\r\n        console.log(response.data.results);\r\n        this.totalPages = response.data.totalPages;\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n        this.weekTableData = [];\r\n        this.quarterTableData = [];\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    async fetchData() {\r\n      try {\r\n        console.log(this.selectedProject, this.currentPage, this.itemsPerPage, this.projectType);\r\n\r\n        let response;\r\n        let responsechart;\r\n        if (!this.showDetails) {\r\n        } else if (this.showDetails && this.timeMode === \"week\") {\r\n          response = await fetchWeekTableData(\r\n            this.selectedProject,\r\n            this.currentPage,\r\n            this.itemsPerPage,\r\n            this.projectType\r\n          );\r\n          console.log(response.data.results);\r\n          this.weekTableData = this.organizeTableData(response.data.results);\r\n        } else if (this.showDetails && this.timeMode === \"quarter\") {\r\n        } else {\r\n          console.error(\"Invalid time mode:\", this.timeMode);\r\n          return;\r\n        }\r\n        console.log(response.data.results);\r\n        this.totalPages = response.data.totalPages;\r\n      } catch (error) {\r\n        console.error(\"Error fetching data:\", error);\r\n        this.weekTableData = [];\r\n        this.quarterTableData = [];\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    // 切換項目類型\r\n    toggleProjectType() {\r\n      this.projectType = this.projectType === \"engineering\" ? \"bank\" : \"engineering\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import \"@/assets/style/browseprogress.css\";\r\n\r\n:deep(.v-btn-toggle) {\r\n  padding: 2px 30px;\r\n  min-height: auto;\r\n  height: auto;\r\n}\r\n</style>\r\n","import apiClient from \"./apiService\";\r\n\r\nconst fetchWeekTableData = (projectId, currentPage, itemsPerPage, project_type) => {\r\n  return apiClient.get(\r\n    `/api/v1/get_voltage228k_progress/${projectId}/${currentPage}/${itemsPerPage}/${project_type}/`,\r\n    {\r\n      headers: {\r\n        Accept: \"application/json\",\r\n      },\r\n    }\r\n  );\r\n};\r\n\r\nconst fetchQuarterTableData = (loopId, currentPage, itemsPerPage, project_type) => {\r\n  return apiClient.get(\r\n    `/api/v1/get_voltage228k_all_quarter_progress/${loopId}/${currentPage}/${itemsPerPage}/${project_type}/`,\r\n    {\r\n      headers: {\r\n        Accept: \"application/json\",\r\n      },\r\n    }\r\n  );\r\n};\r\n\r\nconst fetchTableData = (loopId, currentPage, itemsPerPage, project_type) => {\r\n  return apiClient.get(\r\n    `/api/v1/get_voltage228k_quarter_progress/${loopId}/${currentPage}/${itemsPerPage}/${project_type}/`,\r\n    {\r\n      headers: {\r\n        Accept: \"application/json\",\r\n      },\r\n    }\r\n  );\r\n};\r\n\r\nconst fetchQuarterChartData = (loopId, project_type) => {\r\n  return apiClient.get(\r\n    `/api/v1/get_voltage228k_quarter_chart_progress/${loopId}/${project_type}/`,\r\n    {\r\n      headers: {\r\n        Accept: \"application/json\",\r\n      },\r\n    }\r\n  );\r\n};\r\n\r\nconst fetchCivilWeekTableData = (projectId, currentPage, itemsPerPage, project_type) => {\r\n  return apiClient.get(\r\n    `/api/v1/get_civil_progress/${projectId}/${currentPage}/${itemsPerPage}/${project_type}/`,\r\n    {\r\n      headers: {\r\n        Accept: \"application/json\",\r\n      },\r\n    }\r\n  );\r\n};\r\n\r\nexport {\r\n  fetchWeekTableData,\r\n  fetchQuarterTableData,\r\n  fetchTableData,\r\n  fetchQuarterChartData,\r\n  fetchCivilWeekTableData,\r\n};\r\n","import { render } from \"./Powerline_228KV_Details_copy.vue?vue&type=template&id=fb7705c4&scoped=true\"\nimport script from \"./Powerline_228KV_Details_copy.vue?vue&type=script&lang=js\"\nexport * from \"./Powerline_228KV_Details_copy.vue?vue&type=script&lang=js\"\n\nimport \"./Powerline_228KV_Details_copy.vue?vue&type=style&index=0&id=fb7705c4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fb7705c4\"]])\n\nexport default __exports__"],"names":["apiClient","axios","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","console","Promise","reject","response","status","window","location","href","class","style","_createElementVNode","_createBlock","_component_v_container","_hoisted_1","_createVNode","_component_v_icon","color","onClick","$options","goBack","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_component_v_btn","_normalizeClass","$data","displayMode","toggleDisplayMode","displayModeText","showDetails","_createElementBlock","_hoisted_6","_component_v_btn_toggle","mandatory","timeMode","$event","variant","value","_hoisted_7","projectType","toggleProjectType","projectTypeText","_cache","_ctx","scrollToSection","rounded","_hoisted_8","_component_WeekLoopTable","allDateRanges","weekTableData","_component_v_pagination","currentPage","length","totalPages","onInput","fetchData","fetchWeekTableData","projectId","itemsPerPage","project_type","get","Accept","components","WeekLoopTable","AllQuarterLoopTable","QuarterLoopTable","SiteSelectionChart","data","tab","entimeMode","endisplayMode","selectedProject","enshowDetails","quarterTableData","TableData","civilWeekTableData","civilQuarterTableData","civilTableData","cableWeekTableData","cableQuarterTableData","cableTableData","chartData","labels","datasets","enchartData","watch","created","this","selectedPlan","$route","query","Plan","Project","computed","ranges","Set","forEach","item","date_ranges","range","add","date_range","Array","from","quarterSummary","summaries","identifier","year","quarter","week","map","summary","split","replace","methods","$router","go","previousTimeMode","previousShowDetails","organizeTableData","flatData","organizedData","tempMap","Map","loop_name","actual","expected","has","set","currentPv","dateRangeObj","find","dr","records","push","undefined","log","results","isLoading","__exports__","render"],"sourceRoot":""}