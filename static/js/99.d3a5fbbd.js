"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[99],{1099:function(e,l,t){t.r(l),t.d(l,{default:function(){return G}});var o=t(6252),a=t(3577),s=t(9095),n=t(5215),i=t(7695),r=t(6334),d=t(5911),c=t(9474),m=t(7506),u=t(4055),f=t(1811),p=t(3323),w=t(4696),g=t(9003),_=t(3379),h=t(7737),W=t(4147),y=t(8069),D=t(6393);const x=e=>((0,o.dD)("data-v-0db1b6d9"),e=e(),(0,o.Cn)(),e),F={class:"background-card"},k=x((()=>(0,o._)("div",{class:"title"},[(0,o._)("div",{class:"blue-rectangle"}),(0,o._)("span",{class:"span_title"},"工程進度填寫")],-1))),b={class:"flex-container"},v=x((()=>(0,o._)("div",{class:"orange-rectangle"},null,-1))),V=x((()=>(0,o._)("span",{class:"span_label"},"計畫名稱：",-1))),j={class:"content"},P={class:"span_title"},U=x((()=>(0,o._)("div",{class:"spacer1"},null,-1))),C={key:0},T=x((()=>(0,o._)("span",{class:"span_btn",style:{color:"#00b894"}},"PV進度填寫",-1))),A=x((()=>(0,o._)("span",{class:"span_btn",style:{color:"#00b894"}},"養殖進度填寫",-1))),L={class:"span_title"},E=x((()=>(0,o._)("div",{class:"spacer"},null,-1))),S=x((()=>(0,o._)("span",{style:{color:"#FFFFFF","font-weight":"bold","font-size":"20pt"}},"填寫工程進度",-1))),z={style:{"overflow-y":"auto","max-height":"250px","overflow-x":"hidden"}},O=x((()=>(0,o._)("span",{style:{color:"#FFFFFF","font-weight":"bold","font-size":"20pt"}},"填寫工程進度",-1))),K={style:{"overflow-y":"auto","max-height":"250px","overflow-x":"hidden"}},B=x((()=>(0,o._)("span",{style:{color:"#FFFFFF","font-weight":"bold","font-size":"20pt"}},"填寫申辦進度",-1)));function H(e,l,t,x,H,Z){const Y=(0,o.up)("svg-icon"),$=(0,o.up)("v-date-picker");return(0,o.wg)(),(0,o.iD)("div",F,[k,(0,o._)("div",b,[v,V,(0,o.Wm)(y.rL,{items:H.plan,"item-title":"plan_name","item-value":"id",modelValue:H.selectedPlan,"onUpdate:modelValue":l[0]||(l[0]=e=>H.selectedPlan=e),variant:"underlined"},null,8,["items","modelValue"])]),(0,o._)("div",j,[(0,o.Wm)(g.o,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(H.progress_filling_items_Processed,(e=>((0,o.wg)(),(0,o.j4)(_.D,{key:e["title"]},{default:(0,o.w5)((()=>["案場"===e.item.name?((0,o.wg)(),(0,o.j4)(n._,{key:0,class:"card-radius",color:e["color"]},{default:(0,o.w5)((()=>[(0,o.Wm)(i.E,{class:"text-h5"},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(s.T,{class:"rounded-btn",variant:"outlined",rounded:"circle"},{default:(0,o.w5)((()=>[(0,o.Wm)(Y,{type:"mdi",path:e["icon"],color:e["color"],size:"35"},null,8,["path","color"])])),_:2},1024)])),_:2},1024),(0,o.Wm)(_.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o._)("span",P,(0,a.zw)(e["title"]),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),U,(0,o.Wm)(r.h,{class:"d-flex justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(y.rL,{items:H.loopOptions,"item-title":"loop_name","item-value":"id",label:"迴路",variant:"underlined",modelValue:H.selectedLoop,"onUpdate:modelValue":l[1]||(l[1]=e=>H.selectedLoop=e)},null,8,["items","modelValue"])])),_:1}),(0,o.Wm)(_.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(y.rL,{items:H.filteredSiteOptions,"item-value":"id","item-title":"case_name",label:"案場",variant:"underlined",modelValue:H.selectedSite,"onUpdate:modelValue":l[2]||(l[2]=e=>H.selectedSite=e)},null,8,["items","modelValue"])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(n._,{style:{"background-color":"#FFFFFF"}},{default:(0,o.w5)((()=>[H.selectedLoop&&H.selectedSite?((0,o.wg)(),(0,o.iD)("div",C,[(0,o.Wm)(g.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"12",md:"6",class:"d-flex justify-center align-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(s.T,{block:"",variant:"text",size:"x-large",onClick:l=>Z.toggleDialog(e.Dialog1,e),style:{"background-color":"#FFFFFF",padding:"5px 10px"},class:"d-flex justify-center align-center"},{default:(0,o.w5)((()=>[T])),_:2},1032,["onClick"])])),_:2},1024),Z.is_mobile?((0,o.wg)(),(0,o.j4)(m.J,{key:1})):((0,o.wg)(),(0,o.j4)(m.J,{key:0,vertical:""})),(0,o.Wm)(_.D,{cols:"12",md:"6",class:"d-flex justify-center align-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(s.T,{block:"",variant:"text",size:"x-large",onClick:l=>Z.toggleDialog(e.Dialog2,e),style:{"background-color":"#FFFFFF",padding:"5px 10px"},class:"d-flex justify-center align-center"},{default:(0,o.w5)((()=>[A])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1032,["color"])):((0,o.wg)(),(0,o.j4)(n._,{key:1,class:"card-radius",color:e["color"]},{default:(0,o.w5)((()=>[(0,o.Wm)(i.E,{class:"text-h5"},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(s.T,{class:"rounded-btn",variant:"outlined",rounded:"circle"},{default:(0,o.w5)((()=>[(0,o.Wm)(Y,{type:"mdi",path:e["icon"],color:e["color"],size:"35"},null,8,["path","color"])])),_:2},1024)])),_:2},1024),(0,o.Wm)(_.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o._)("span",L,(0,a.zw)(e["title"]),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),E,(0,o.Wm)(r.h,{class:"d-flex justify-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(s.T,{onClick:l=>Z.toggleDialog(e.Dialog,e),rounded:"lg",size:"x-large",color:e["color"],"prepend-icon":"mdi-pencil",style:{"background-color":"#FFFFFF",padding:"10px 20px",margin:"10px 10px"}},{prepend:(0,o.w5)((()=>[(0,o.Wm)(h.t,{color:e["color"]},null,8,["color"])])),default:(0,o.w5)((()=>[(0,o.Uk)(" 開始記錄 ")])),_:2},1032,["onClick","color"])])),_:2},1024)])),_:2},1032,["color"]))])),_:2},1024)))),128))])),_:1})]),(0,o.Wm)(c.B,{modelValue:H.showPVDialog,"onUpdate:modelValue":l[8]||(l[8]=e=>H.showPVDialog=e),style:{"max-width":"800px"},scrollable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(n._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i.E,{style:{"background-color":"#0D47A1"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,{style:{"max-height":"70px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"11",class:"d-flex align-center"},{default:(0,o.w5)((()=>[S])),_:1}),(0,o.Wm)(_.D,{cols:"1"},{default:(0,o.w5)((()=>[(0,o.Wm)(s.T,{variant:"plain",style:{"background-color":"#0D47A1"},icon:"",onClick:l[3]||(l[3]=e=>H.showPVDialog=!1)},{default:(0,o.w5)((()=>[(0,o.Wm)(h.t,{style:{"background-color":"#0D47A1",color:"#FFFFFF"}},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-close")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(d.Z,{style:(0,a.j5)({"overflow-y":Z.is_mobile?"auto":"hidden"})},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(y.rL,{items:["王大明","王小明","王阿明"],label:"工程名稱",variant:"underlined"})])),_:1}),(0,o.Wm)(_.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(y.rL,{items:["王大明","王小明","王阿明"],label:"現場監工",variant:"underlined"})])),_:1}),(0,o.Wm)(_.D,{cols:"12",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(y.rL,{items:["施工中","停工","未開工"],label:"工程狀態",variant:"underlined"})])),_:1}),(0,o.Wm)(_.D,{cols:"12",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(W.T,{modelValue:H.menu,"onUpdate:modelValue":l[7]||(l[7]=e=>H.menu=e),"close-on-content-click":!1},{activator:(0,o.w5)((({props:t})=>[(0,o.Wm)(D.h,(0,o.dG)({modelValue:Z.formattedDateRange,"onUpdate:modelValue":l[4]||(l[4]=e=>Z.formattedDateRange=e),label:"週間",variant:"underlined"},t,(0,o.mx)(e.on)),null,16,["modelValue"])])),default:(0,o.w5)((()=>[(0,o.Wm)($,{"show-adjacent-months":"",color:"primary",modelValue:H.selectedDate,"onUpdate:modelValue":l[5]||(l[5]=e=>H.selectedDate=e),"onClick:save":l[6]||(l[6]=e=>H.menu=!1)},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(_.D,{cols:"12",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(D.h,{"model-value":0,label:"施工人數",variant:"underlined",suffix:"人"})])),_:1}),(0,o.Wm)(_.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o._)("div",z,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(H.items,(e=>((0,o.wg)(),(0,o.j4)(_.D,{key:e["title"],style:{width:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u.Vc,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f.M,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.V,{color:"primary",style:{"font-weight":"bold"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,{"no-gutters":""},{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{class:"d-flex justify-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e["title"]),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,o.Wm)(w.H,{style:{"background-color":"#E3F2FD"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u.Vc,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e["panels"],(e=>((0,o.wg)(),(0,o.j4)(f.M,{key:e["title"]},{default:(0,o.w5)((()=>[(0,o.Wm)(p.V,{style:{border:"3px solid #E3F2FD",color:"#0D47A1","font-weight":"bold"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,{"no-gutters":""},{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{class:"d-flex justify-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e["title"]),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,o.Wm)(w.H,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,{justify:"space-around","no-gutters":""},{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"12",md:"6",class:"d-flex align-center justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(D.h,{hint:"僅供參考",suffix:"%","model-value":e["progress"],label:"前次進度",variant:"outlined",readonly:"",style:{margin:"10px"}},null,8,["model-value"])])),_:2},1024),(0,o.Wm)(_.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(D.h,{"model-value":0,label:"本周進度",variant:"outlined",suffix:"%",style:{margin:"10px"}})])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])])),_:1}),(0,o.Wm)(_.D,{cols:"12",class:"d-flex justify-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(s.T,{color:"primary",onClick:Z.clearForm,style:{margin:"5px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("清空")])),_:1},8,["onClick"]),(0,o.Wm)(s.T,{color:"secondary",onClick:Z.submitForm,style:{margin:"5px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("送出")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["style"])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(c.B,{modelValue:H.showBreedingDialog,"onUpdate:modelValue":l[14]||(l[14]=e=>H.showBreedingDialog=e),style:{"max-width":"800px"},scrollable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(n._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i.E,{style:{"background-color":"#0D47A1"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,{style:{"max-height":"70px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"11",class:"d-flex align-center"},{default:(0,o.w5)((()=>[O])),_:1}),(0,o.Wm)(_.D,{cols:"1"},{default:(0,o.w5)((()=>[(0,o.Wm)(s.T,{variant:"plain",style:{"background-color":"#0D47A1"},icon:"",onClick:l[9]||(l[9]=e=>H.showBreedingDialog=!1)},{default:(0,o.w5)((()=>[(0,o.Wm)(h.t,{style:{"background-color":"#0D47A1",color:"#FFFFFF"}},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-close")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(d.Z,{style:(0,a.j5)({"overflow-y":Z.is_mobile?"auto":"hidden"})},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(y.rL,{items:["王大明","王小明","王阿明"],label:"工程名稱",variant:"underlined"})])),_:1}),(0,o.Wm)(_.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(y.rL,{items:["王大明","王小明","王阿明"],label:"現場監工",variant:"underlined"})])),_:1}),(0,o.Wm)(_.D,{cols:"12",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(y.rL,{items:["施工中","停工","未開工"],label:"工程狀態",variant:"underlined"})])),_:1}),(0,o.Wm)(_.D,{cols:"12",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(W.T,{modelValue:H.menu,"onUpdate:modelValue":l[13]||(l[13]=e=>H.menu=e),"close-on-content-click":!1},{activator:(0,o.w5)((({props:t})=>[(0,o.Wm)(D.h,(0,o.dG)({modelValue:Z.formattedDateRange,"onUpdate:modelValue":l[10]||(l[10]=e=>Z.formattedDateRange=e),label:"週間",variant:"underlined"},t,(0,o.mx)(e.on)),null,16,["modelValue"])])),default:(0,o.w5)((()=>[(0,o.Wm)($,{"show-adjacent-months":"",color:"primary",modelValue:H.selectedDate,"onUpdate:modelValue":l[11]||(l[11]=e=>H.selectedDate=e),"onClick:save":l[12]||(l[12]=e=>H.menu=!1)},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(_.D,{cols:"12",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(D.h,{"model-value":0,label:"施工人數",variant:"underlined",suffix:"人"})])),_:1}),(0,o.Wm)(_.D,{cols:"12"},{default:(0,o.w5)((()=>[(0,o._)("div",K,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(H.items,(e=>((0,o.wg)(),(0,o.j4)(_.D,{key:e["title"],style:{width:"100%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u.Vc,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f.M,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.V,{color:"primary",style:{"font-weight":"bold"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,{"no-gutters":""},{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{class:"d-flex justify-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e["title"]),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,o.Wm)(w.H,{style:{"background-color":"#E3F2FD"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u.Vc,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e["panels"],(e=>((0,o.wg)(),(0,o.j4)(f.M,{key:e["title"]},{default:(0,o.w5)((()=>[(0,o.Wm)(p.V,{style:{border:"3px solid #E3F2FD",color:"#0D47A1","font-weight":"bold"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,{"no-gutters":""},{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{class:"d-flex justify-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e["title"]),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,o.Wm)(w.H,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,{justify:"space-around","no-gutters":""},{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"12",md:"6",class:"d-flex align-center justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(D.h,{hint:"僅供參考",suffix:"個","model-value":e["progress"],label:"前次總量",variant:"outlined",readonly:"",style:{margin:"10px"}},null,8,["model-value"])])),_:2},1024),(0,o.Wm)(_.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(D.h,{"model-value":0,label:"本周總量",variant:"outlined",suffix:"個",style:{margin:"10px"}})])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])])),_:1}),(0,o.Wm)(_.D,{cols:"12",class:"d-flex justify-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(s.T,{color:"primary",onClick:Z.clearForm,style:{margin:"5px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("清空")])),_:1},8,["onClick"]),(0,o.Wm)(s.T,{color:"secondary",onClick:Z.submitForm,style:{margin:"5px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("送出")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["style"])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(c.B,{modelValue:H.showelectricityDialog,"onUpdate:modelValue":l[20]||(l[20]=e=>H.showelectricityDialog=e),style:{"max-width":"800px"},scrollable:""},{default:(0,o.w5)((()=>[(0,o.Wm)(n._,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i.E,{style:{"background-color":"#0D47A1"}},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,{style:{"max-height":"70px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"11",class:"d-flex align-center"},{default:(0,o.w5)((()=>[B])),_:1}),(0,o.Wm)(_.D,{cols:"1"},{default:(0,o.w5)((()=>[(0,o.Wm)(s.T,{variant:"plain",style:{"background-color":"#0D47A1"},icon:"",onClick:l[15]||(l[15]=e=>H.showelectricityDialog=!1)},{default:(0,o.w5)((()=>[(0,o.Wm)(h.t,{style:{"background-color":"#0D47A1",color:"#FFFFFF"}},{default:(0,o.w5)((()=>[(0,o.Uk)("mdi-close")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(d.Z,{style:(0,a.j5)({"overflow-y":Z.is_mobile?"auto":"hidden"})},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"12",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(y.rL,{items:["王大明","王小明","王阿明"],label:"迴路名稱",variant:"underlined"})])),_:1}),(0,o.Wm)(_.D,{cols:"12",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(y.rL,{items:["王大明","王小明","王阿明"],label:"填表人員",variant:"underlined"})])),_:1}),(0,o.Wm)(_.D,{cols:"12",md:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(W.T,{modelValue:H.menu,"onUpdate:modelValue":l[19]||(l[19]=e=>H.menu=e),"close-on-content-click":!1},{activator:(0,o.w5)((({props:t})=>[(0,o.Wm)(D.h,(0,o.dG)({modelValue:Z.formattedDateRange,"onUpdate:modelValue":l[16]||(l[16]=e=>Z.formattedDateRange=e),label:"週間",variant:"underlined"},t,(0,o.mx)(e.on)),null,16,["modelValue"])])),default:(0,o.w5)((()=>[(0,o.Wm)($,{"show-adjacent-months":"",color:"primary",modelValue:H.selectedDate,"onUpdate:modelValue":l[17]||(l[17]=e=>H.selectedDate=e),"onClick:save":l[18]||(l[18]=e=>H.menu=!1)},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(_.D,{cols:"12",class:"d-flex align-center justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(u.Vc,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f.M,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p.V,{color:"primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,{"no-gutters":""},{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{class:"d-flex justify-start"},{default:(0,o.w5)((()=>[(0,o.Uk)(" 電業申辦進度更新 ")])),_:1})])),_:1})])),_:1}),(0,o.Wm)(w.H,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g.o,{justify:"space-around","no-gutters":""},{default:(0,o.w5)((()=>[(0,o.Wm)(_.D,{cols:"12",md:"6",class:"d-flex align-center justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(D.h,{hint:"僅供參考","model-value":"初步協商 - 50%",label:"前次進度",variant:"outlined",readonly:"",style:{margin:"10px"}})])),_:1}),(0,o.Wm)(_.D,{cols:"12",md:"6"},{default:(0,o.w5)((()=>[(0,o.Wm)(y.rL,{items:["細部協商 - 55%","出流管制 - 65%","施工許可 - 75%"],label:"本次進度",variant:"underlined"})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(_.D,{cols:"12",class:"d-flex justify-end"},{default:(0,o.w5)((()=>[(0,o.Wm)(s.T,{color:"primary",onClick:Z.clearForm,style:{margin:"5px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("清空")])),_:1},8,["onClick"]),(0,o.Wm)(s.T,{color:"secondary",onClick:Z.submitForm,style:{margin:"5px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("送出")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["style"])])),_:1})])),_:1},8,["modelValue"])])}t(560);var Z=t(9374),Y=t(5694),$=t(5317),I={name:"my-component",components:{SvgIcon:Y.Z},data(){return{mdiPencil:$.r9,mdiPier:$.wOc,mdiPool:$.cBT,mdiFlashAlert:$.u6l,mdiSprinklerVariant:$.Xhy,mdiAxisArrow:$.LKY,planNames:[],plan:[],project:[],showPVDialog:!1,showBreedingDialog:!1,showelectricityDialog:!1,showDialog1:!1,menu:!1,currentProjectitem:null,selectedDate:(new Date).toISOString().substr(0,10),show:!1,weekDays:[],selectedPlan:null,progress_filling_items:[],progress_filling_items_Processed:[],record_planid:null,loopOptions:[],siteOptions:[],selectedSite:null,filteredSiteOptions:[],selectedLoop:null,subitem:[],items:[{title:"A.土建工程",panels:[{progress:12,title:"測量放樣+基樁加工"},{progress:12,title:"植樁工程"},{progress:12,title:"路口監視設備安裝"}]},{title:"B.結構工程",panels:[{progress:12,title:"結構部件組裝架設工程"},{progress:12,title:"水槽安裝"},{progress:12,title:"立柱水泥灌漿作業"}]}]}},computed:{formattedDateRange(){const e=e=>{const l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t=e.getFullYear(),o=("0"+(e.getMonth()+1)).slice(-2),a=("0"+e.getDate()).slice(-2);l[e.getDay()];return`${t}/${o}/${a}`};if(this.selectedDate){const l=new Date(this.selectedDate),t=l.getDay(),o=new Date(l);o.setDate(l.getDate()-t+(0===t?-1:0));const a=new Date(l);return a.setDate(l.getDate()+(6-t)+(0===t?1:0)),`${e(o)} - ${e(a)}`}return null},is_mobile(){return this.$vuetify.display.xs},filteredLoopOptions(){const e=this.projects.filter((e=>e.plan_id===this.selectedPlan)),l=e.map((e=>e.id));return this.loopOptions.filter((e=>l.includes(e.project_id)))}},methods:{async toggleDialog(e,l){const t=await this.checkPermission(l);t?(this.currentProjectitem=l,this[e]=!this[e]):alert("您沒有權限執行該操作")},clearForm(){},submitForm(){},getPlanIdFromName(e){const l=this.plan.find((l=>l.name===e));return l?l.id:null},fetchProjectsForPlan(e){Z.Z.get(`/api/projects-by-plan/?plan_id=${e}`).then((e=>{console.log("api response:",e.data),this.progress_filling_items=e.data.map((e=>({id:e.id,name:e.projcet_name}))),this.processProgressFillingItems(this.progress_filling_items),console.log(this.progress_filling_items_Processed)})).catch((e=>{console.error("Error fetching projects:",e),this.progress_filling_items=[]}))},processProgressFillingItems(e){console.log(e),this.progress_filling_items.forEach((e=>{"案場"===e.name?this.progress_filling_items_Processed.push({item:e,title:"案場工程進度",color:"#00b894",icon:$.wOc,Dialog1:"showPVDialog",Dialog2:"showBreedingDialog"}):"22.8KV"===e.name?this.progress_filling_items_Processed.push({item:e,title:"22.8KV工程進度",color:"#a29bfe",icon:$.LKY,Dialog:"showPVDialog"}):"電業申辦"===e.name?this.progress_filling_items_Processed.push({item:e,title:"電業申辦進度",color:"#FF6F00",icon:$.u6l,Dialog:"showelectricityDialog"}):"161KV"===e.name?this.progress_filling_items_Processed.push({item:e,title:"161KV工程進度",color:"#ff7675",icon:$.eYQ,Dialog:"showDialog1"}):"升壓站"===e.name&&this.progress_filling_items_Processed.push({item:e,title:"升壓站工程進度",color:"#38ada9",icon:$.Xhy,Dialog:"showDialog1"})})),console.log(this.progress_filling_items_Processed)},async checkPermission(e){const l=localStorage.getItem("user"),t=e.title,o="write";console.log({user:l},{resource:t},{action:o});const a=await this.$permissionCheck.checkPermission(l,t,o);return console.log("hasPermission",a),a}},mounted(){console.log(this.is_mobile),Z.Z.get("/api/plans/").then((e=>{if(console.log("api response:",e.data),!Array.isArray(e.data))throw console.error("Unexpected response format:",e.data),new Error("Unexpected response format");this.plan=e.data,this.planNames=e.data.map((e=>e.plan_name))})).catch((e=>{console.error("There was an error fetching the plans:",e)})),Z.Z.get("/api/projects/").then((e=>{if(console.log("api response:",e.data),!Array.isArray(e.data))throw console.error("Unexpected response format:",e.data),new Error("Unexpected response format");this.project=e.data})).catch((e=>{console.error("There was an error fetching the plans:",e)})),Z.Z.get("/api/project-loop/").then((e=>{if(console.log("loop api response:",e.data),!Array.isArray(e.data))throw console.error("Unexpected response format:",e.data),new Error("Unexpected response format");this.loopOptions=e.data})).catch((e=>{console.error("There was an error fetching the plans:",e)})),Z.Z.get("/api/project-cases/").then((e=>{if(console.log("api response:",e.data),!Array.isArray(e.data))throw console.error("Unexpected response format:",e.data),new Error("Unexpected response format");this.siteOptions=e.data})).catch((e=>{console.error("There was an error fetching the plans:",e)}))},watch:{selectedPlan(e){e?(this.fetchProjectsForPlan(e),this.progress_filling_items_Processed=[]):this.progress_filling_items=[]},selectedLoop(e){this.filteredSiteOptions=e?this.siteOptions.filter((l=>l.loop_id===e)):[],this.selectedSite=null}}},M=t(3744);const R=(0,M.Z)(I,[["render",H],["__scopeId","data-v-0db1b6d9"]]);var G=R}}]);
//# sourceMappingURL=99.d3a5fbbd.js.map